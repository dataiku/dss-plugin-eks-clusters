{
    "meta" : {
        "label" : "Node group",
        "pluralLabel": "Node groups",
        "description" : "Predefined configurations for EKS node groups",
        "icon" : "icon-tasks"

    },
    "defaultDefinableInline" : true,
    "defaultDefinableAtProjectLevel" : true,
    "paramsPythonSetup": "get_instance_types.py",
    "params": [
        {
            "type":"SEPARATOR",
            "label" :"EC2 Instance Types"
        },
        {
            "name": "singleMultiMachinePool",
            "label": "Use a Single or Multi-Instance Types for the Node Pool?",
            "type": "SELECT",
            "selectChoices": [
                {"value": "multi", "label": "Multiple Instance Types"},
                {"value": "single", "label": "Single Instance Type"}
              ],
            "mandatory" : true,
            "defaultValue" : "multi"
        },
        {
            "name": "multiMachineType",
            "label": "EC2 Instance Types",
            "description": "Collection of Instance Types available to the Node Pool. See EC2 documentation for available instance types https://aws.amazon.com/ec2/instance-types/",
            "type": "MULTISELECT",
            "getChoicesFromPython": true,
            "visibilityCondition" : "model.singleMultiMachinePool == 'multi'",
            "mandatory" : false
        },
        {
            "name": "machineType",
            "label": "Single Machine type",

            "description": "EC2 instance type for the nodes. See EC2 documentation for available instance types",
            "type": "SELECT",
            "getChoicesFromPython": true,
            "visibilityCondition" : "model.singleMultiMachinePool == 'single'",
            "mandatory" : false
        },
        {
            "type":"SEPARATOR",
            "label" :"Node Group Configuration"
        },
        {
            "name": "numNodes",
            "label": "Default number of nodes",
            "type": "INT",
            "mandatory" : true,
            "defaultValue" : 3
        },
        {
            "name": "numNodesAutoscaling",
            "label": "Enable nodes autoscaling",
            "type": "BOOLEAN",
            "mandatory" : true,
            "defaultValue" : true
        },
        {
            "name": "minNumNodes",
            "label": "Min number of nodes",
            "type": "INT",
            "mandatory" : true,
            "defaultValue" : 2,
            "visibilityCondition" : "model.numNodesAutoscaling"
        },
        {
            "name": "maxNumNodes",
            "label": "Max number of nodes",
            "type": "INT",
            "mandatory" : true,
            "defaultValue" : 5,
            "visibilityCondition" : "model.numNodesAutoscaling"
        },

        {
            "type":"SEPARATOR",
            "label" :"Storage Options"
        },
        {
            "name": "diskType",
            "label": "Disk type",
            "description": "EBS disk type for the nodes. Leave empty for default (gp3)",
            "type": "SELECT",
            "selectChoices": [
                {"value": "gp3", "label": "gp3"},
                {"value": "gp2", "label": "gp2"},
                {"value": "io2", "label": "io2"},
                {"value": "io1", "label": "io1"}
              ],
            "mandatory" : false,
            "defaultValue" : "gp3"
        },
        {
            "name": "diskSizeGb",
            "label": "Disk size",
            "description": "Disk size for the nodes. Leave 0 for default (20 GB)",
            "type": "INT",
            "mandatory" : false
        },

        {
            "type":"SEPARATOR",
            "label" :"GPU Options",
            "description": "Disk size for the nodes. Leave 0 for default (20 GB)"
        },
        {
            "name": "enableGPU",
            "label": "GPU",
            "description": "Enable GPU workloads on the cluster",
            "type": "BOOLEAN",
            "defaultValue": false
        }
    ]
}
